# Заключительная часть

Примите поздравления! Ваша базовая Linux система настроена и готова к работе! Прежде чем выполнить загрузку, выполним некоторые заключительные шаги.

## Создание файла /etc/os-release

Файл необходим для идентификации операционной системы. Он необходим при использовании systemd, а также для некоторых графических оболочек.

Базовый формат файла `os-release` - это список назначений переменных, совместимых с оболочкой, разделенных новой строкой. Можно получить конфигурацию из сценариев оболочки, однако, помимо простого назначения переменных, функции оболочки не поддерживаются (это означает, что расширение переменных явно не поддерживается), что позволяет приложениям читать файл без реализации механизма выполнения, совместимого с оболочкой. Значения присвоения переменных должны быть заключены в двойные или одинарные кавычки, если они включают пробелы, точки с запятой или другие специальные символы за пределами A – Z, a – z, 0–9. Специальные символы оболочки («$», кавычки, обратная косая черта) должны быть экранированы обратной косой чертой в соответствии со стилем оболочки. Все строки должны быть в формате UTF-8, и нельзя использовать непечатаемые символы. Объединение нескольких строк в индивидуальных кавычках не поддерживается. Строки, начинающиеся с "#", игнорируются как комментарии. Пустые строки разрешены и игнорируются.

Создайте файл, выполнив команду:

<pre class="pre">
cat > /etc/os-release << "EOF"
NAME="MyLinux"
VERSION="{{ book.revision }}"
ID=mylinux
PRETTY_NAME="MyLinux {{ book.revision }}"
VERSION_CODENAME="MyLinuxCodeName"
EOF
</pre>

### Параметры идентификации

**NAME**

Строка, идентифицирующая операционную систему, без компонента версии и подходящая для представления пользователю. Если не установлен, по умолчанию используется «NAME = Linux». Пример: `NAME=Fedora` или `NAME="Debian GNU/Linux"`.

**VERSION**

Строка, идентифицирующая версию операционной системы, исключая любую информацию об имени ОС, возможно, включая кодовое имя выпуска, и подходящая для представления пользователю. Это поле не является обязательным. Пример: `VERSION=17` или `VERSION=17 (Muscular miracle)`.

**ID**

Строка в нижнем регистре (без пробелов и других символов, кроме 0–9, a – z, «.», «\_» И «-»), идентифицирующая операционную систему, исключая любую информацию о версии и подходящая для обработки скриптами или использования в сгенерированных именах файлов. Если не установлен, по умолчанию используется `ID=linux`.

?> Пример: `ID = fedora` или `ID = debian`.

**ID_LIKE**

Список идентификаторов операционных систем, разделенных пробелами, в том же синтаксисе, что и параметр ID =. В нем должны быть перечислены идентификаторы операционных систем, которые тесно связаны с локальной операционной системой в отношении упаковки и программных интерфейсов, например, перечисление одного или нескольких идентификаторов ОС, производными от которых является локальная ОС. Обычно операционная система должна перечислять только другие идентификаторы ОС, производными от которых она сама является, а не какие-либо производные от нее операционные системы, хотя возможны симметричные отношения. Скрипты сборки и т.п. должны проверять эту переменную, если им нужно идентифицировать локальную операционную систему, а значение ID = не распознается. Операционные системы следует перечислять в порядке близости локальной операционной системы к перечисленным, начиная с ближайшей. Это поле не является обязательным. Пример: для операционной системы с `ID = centos` подходящим будет присвоение `ID_LIKE="rhel fedora"`. Для операционной системы с `ID = ubuntu` подходит значение `ID_LIKE = debian`.

**VERSION_CODENAME**

Строка в нижнем регистре (без пробелов и других символов, кроме 0–9, a – z, «.», «\_» И «-»), идентифицирующая кодовое имя выпуска операционной системы, исключая любую информацию об имени ОС или версию выпуска, и подходящая для обработки скриптами или использования в сгенерированных именах файлов. Это поле является необязательным и может быть реализовано не во всех системах.

?> Примеры: `VERSION_CODENAME = buster`, `VERSION_CODENAME = xenial`.

**VERSION_ID**

Строка в нижнем регистре (в основном числовая, без пробелов и других символов, кроме 0–9, a – z, «.», «\_» И «-»), идентифицирующая версию операционной системы, исключая любую информацию об имени ОС или код выпуска. Подходит для обработки скриптами или использования в сгенерированных именах файлов. Это поле не является обязательным.

?> Пример: `VERSION_ID = 34` или `VERSION_ID = 21.04`.

**PRETTY_NAME**

Красивое название операционной системы в формате, удобном для представления пользователю. Может содержать или не содержать кодовое название выпуска или версию ОС, в зависимости от обстоятельств. Если не установлен, по умолчанию используется `PRETTY_NAME =" Linux "`.

?> Пример: `PRETTY_NAME =" Fedora 34 (Workstation Edition) "`.

**ANSI_COLOR**

Предлагаемый цвет презентации при отображении названия ОС в консоли. Это должно быть указано как строка, подходящая для включения в escape-код ESC [m ANSI / ECMA-48 для установки графического представления. Это поле не является обязательным. Пример: "ANSI_COLOR =" 0; 31 "" для красного, "ANSI_COLOR =" 1; 34 "" для голубого или "ANSI_COLOR =" 0; 38; 2; 60; 110; 180 "" для синего цвета Fedora.

**CPE_NAME**

Имя CPE для операционной системы в синтаксисе привязки URI в соответствии со спецификацией перечисления Common Platform, предложенной NIST. Это поле не является обязательным.

?> Пример: `CPE_NAME =" cpe: / o: fedoraproject: fedora: 34 "`.

**HOME_URL, DOCUMENTATION_URL, SUPPORT_URL, BUG_REPORT_URL, PRIVACY_POLICY_URL**

Ссылки на ресурсы в Интернете, связанные с операционной системой. `HOME_URL =` должен ссылаться на домашнюю страницу операционной системы или, альтернативно, на домашнюю страницу конкретной версии операционной системы. `DOCUMENTATION_URL =` следует ссылаться на главную страницу документации для этой операционной системы. SUPPORT_URL = следует ссылаться на главную страницу поддержки операционной системы, если таковая имеется. Это в первую очередь предназначено для операционных систем, для которых поставщики предоставляют поддержку. `BUG_REPORT_URL =` должен ссылаться на главную страницу отчетов об ошибках для операционной системы, если таковые имеются. Это в первую очередь предназначено для операционных систем, которые полагаются на обеспечение качества сообщества. `PRIVACY_POLICY_URL =` должен ссылаться на главную страницу политики конфиденциальности для операционной системы, если таковая имеется. Эти параметры являются необязательными, и обычно предоставляется только некоторые из этих параметров. Эти URL-адреса предназначены для отображения в пользовательских интерфейсах «Об этой системе» за ссылками с такими заголовками, как «Об этой операционной системе», «Получить поддержку», «Сообщить об ошибке» или «Политика конфиденциальности». Значения должны быть в формате RFC3986 и должны быть URL-адресами «http:» или «https:» и, возможно, «mailto:» или «tel:». В каждой настройке должен быть указан только один URL. Если необходимо указать несколько ресурсов, рекомендуется предоставить целевую страницу в Интернете, связывающую все доступные ресурсы.

?> Пример: `HOME_URL =" https://fedoraproject.org/ "`.

**BUILD_ID**

Строка, однозначно определяющая образ системы, используемый в качестве источника для распределения (он не обновляется с обновлениями системы). Поле может быть идентичным для разных VERSION_ID, поскольку BUILD_ID - это только уникальный идентификатор для конкретной версии. В дистрибутивах, которые выпускают каждое обновление как новую версию, потребуется использовать только VERSION_ID, поскольку каждая сборка уже отличается на основе VERSION_ID. Это поле не является обязательным.

?> Пример: `BUILD_ID =« 2013-03-20.3 »` или `BUILD_ID = 201303203`.

**VARIANT**

Строка, идентифицирующая конкретный вариант или редакцию операционной системы, подходящую для представления пользователю. Это поле может использоваться для информирования пользователя о том, что конфигурация этой системы подчиняется определённому расходящемуся набору правил или настройкам конфигурации по умолчанию. Это поле является необязательным и может быть реализовано не во всех системах. Примеры: `VARIANT =" Server Edition "`, `VARIANT =" Smart Refrigerator Edition "`

!> Примечание: это поле предназначено только для отображения. Поле `VARIANT_ID` следует использовать для принятия программных решений.

**VARIANT_ID**

Строка в нижнем регистре (без пробелов и других символов, кроме 0–9, a – z, «.», «\_» И «-»), определяющая конкретный вариант или выпуск операционной системы. Это может быть интерпретировано другими пакетами для определения расходящейся конфигурации по умолчанию. Это поле является необязательным и может быть реализовано не во всех системах.

?> Примеры: `VARIANT_ID = server`, `VARIANT_ID = embedded`.

**LOGO**

Строка, определяющая имя значка, как определено в Спецификации темы значков freedesktop.org. Это может использоваться графическими приложениями для отображения логотипа операционной системы или дистрибьютора. Это поле является необязательным и может быть реализовано не во всех системах.

?> Пример: `LOGO=fedora-logo-icon`.

**DEFAULT_HOSTNAME**

Строка, определяющая имя хоста, если имя хоста отсутствует и никакой другой источник конфигурации не указывает имя хоста. Должна быть либо одна метка DNS (строка, состоящая из 7-битных символов нижнего регистра ASCII и без пробелов и точек, ограниченная форматом, разрешённым для меток имен доменов DNS), либо последовательность таких меток, разделённых одиночными точками, которые образуют действительное полное доменное имя DNS. Имя хоста должно состоять не более чем из 64 символов, что является ограничением Linux (DNS допускает более длинные имена).

**SYSEXT_LEVEL**

Строка в нижнем регистре (в основном числовая, без пробелов и других символов, кроме 0–9, a – z, «.», «\_» И «-»), определяющая уровень поддержки расширений операционной системы, чтобы указать, какие образы расширений поддерживается.

?> Пример: `SYSEXT_LEVEL = 2` или `SYSEXT_LEVEL = 15,14`.

## Создание файла /etc/lsb-release

Это файл, в который некоторые дистрибутивы Linux помещают информацию для использования старыми программами. Однако, этот файл не является частью стандарта LSB.

Создайте файл, выполнив команду:

<pre class="pre">
cat > /etc/lsb-release << "EOF"
DISTRIB_ID="MyLinux"
DISTRIB_RELEASE="{{ book.revision }}"
DISTRIB_CODENAME="mylinux"
DISTRIB_DESCRIPTION="MyLinux"
EOF
</pre>

Если система совместима с LSB, файл `/etc/lsb-release` должен содержать поле `LSB_VERSION`. Значение поля должно представлять собой список поддерживаемых версий модулей, разделённых двоеточиями, с указанием модулей спецификации LSB, которым соответствует установка. Если установка не соответствует требованиям, вышеуказанное поле должно отсутствовать.

!> Замените значения переменных в этом файле на нужные вам. Например, значение `MyLinux` переменной `DISTRIB_ID` заменине на ваше уникальное название дистрибутива.

## Перезагрузка

Теперь, когда всё программное обеспечение установлено, можно перезагрузить компьютер. Однако вам следует знать о нескольких вещах. Система, которую вы создали, весьма минимальна. Скорее всего потребуется множество других программ, например, графическое окружение, и <a :href="exrtraUrl">в следующей части</a> будут предоставлены инструкции по их сборке.

На этом этапе также уместно проверить следующие файлы конфигурации:

```
/etc/bashrc
/etc/dircolors
/etc/fstab
/etc/hosts
/etc/inputrc
/etc/profile
/etc/resolv.conf
/etc/vimrc
/root/.bash_profile
/root/.bashrc
```

?> Файлы `/root/.bash_profile` и `/root/.bashrc` можете скопировать в каталог `/etc/skel` - из него файлы копируются в домашние директории пользователей, которых вы создадите в будущем.

Выполним выход из среды chroot:

```bash
logout
```

Отключим виртуальные файловые системы:

```bash
umount $LIN/dev{/pts,}
umount $LIN/{sys,proc,run}
```

Размонтируем иерархию каталогов созданной Linux системы:

```bash
umount -Rv $LIN
```

Выполним перезагрузку

```
shutdown -r now
```

После перезагрузки система будет готова к использованию.

<script>
	new Vue({ el: '#main'})
</script>
